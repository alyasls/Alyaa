<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alya's Sanctuary ü¶¢</title>
<link href="https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;1,400&family=Dancing+Script:wght@500;700&family=Playfair+Display:ital,wght@0,400;1,400&family=Crimson+Text:ital@0;1&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

<style>
  /* --- HIDE BLOG ELEMENTS --- */
  #navbar-iframe, .navbar, .navbar-c, #navbar, header, footer, .header-outer, .footer-outer, .sidebar-container, .tabs-outer, .nav, .PopularPosts, .BlogArchive, .Profile, .post-footer, .comment-replybox-single, .blog-pager, #comments, .comments { 
    display: none !important; visibility: hidden !important; height: 0 !important; 
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: linear-gradient(135deg, #fff0f5 0%, #ffe4e9 100%) !important;
    background-attachment: fixed;
    margin: 0 !important; 
    padding: 0 !important;
    overflow-x: hidden; 
    font-family: 'Courier Prime', monospace;
    position: relative;
  }

  /* Optimized background pattern - reduced complexity */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-image: radial-gradient(#ffb7c5 0.8px, transparent 0.8px);
    background-size: 15px 15px;
    pointer-events: none;
    z-index: 0;
    opacity: 0.5;
  }

  :root { 
    --coquette-pink: #db7093; 
    --soft-cream: #fff9fb; 
    --vintage-brown: #5c4033;
    --pastel-purple: #e6b8e7;
    --soft-blue: #b4d7ff;
  }

  /* --- RUNNING TEXT --- */
  .running-text {
    background: linear-gradient(90deg, var(--coquette-pink), #ff9ab5, var(--coquette-pink));
    background-size: 200% 100%;
    animation: gradientMove 3s linear infinite;
    color: white;
    padding: 8px 0;
    font-size: 13px;
    white-space: nowrap;
    overflow: hidden;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 3px 10px rgba(219, 112, 147, 0.3);
  }

  @keyframes gradientMove {
    0% { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
  }
  
  .running-text marquee {
    padding: 0 20px;
  }
  
  /* --- POPUP NOTIFICATIONS --- */
  .mini-popup {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: white;
    border: 2px solid var(--coquette-pink);
    padding: 12px 18px;
    border-radius: 25px;
    font-size: 13px;
    color: var(--coquette-pink);
    z-index: 10000;
    box-shadow: 0 8px 20px rgba(219, 112, 147, 0.25);
    display: flex;
    align-items: center;
    gap: 10px;
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.95);
  }

  /* --- INVITATION OVERLAY --- */
  #invitation-overlay { 
    position: fixed; 
    top: 0; left: 0; 
    width: 100%; 
    height: 100%; 
    background: linear-gradient(135deg, #fff0f5 0%, #ffe4e9 100%);
    z-index: 999999; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
  }

  .invitation-card {
    background: white;
    padding: 40px;
    border-radius: 30px;
    border: 3px solid var(--coquette-pink);
    box-shadow: 0 15px 40px rgba(219, 112, 147, 0.2);
    text-align: center;
    max-width: 400px;
  }

  .btn-enter { 
    background: linear-gradient(135deg, var(--coquette-pink), #ff9ab5);
    color: white; 
    border: none; 
    padding: 18px 40px; 
    border-radius: 30px; 
    cursor: pointer; 
    font-family: 'Courier Prime'; 
    font-size: 16px;
    font-weight: bold;
    box-shadow: 0 8px 20px rgba(219, 112, 147, 0.4);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .btn-enter::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .btn-enter:hover::before {
    width: 300px;
    height: 300px;
  }

  .btn-enter:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(219, 112, 147, 0.5);
  }

  /* --- MAIN CONTAINER --- */
  .alya-app-container { 
    width: 92%; 
    max-width: 550px; 
    margin: 20px auto; 
    background: rgba(255, 249, 251, 0.95);
    backdrop-filter: blur(10px);
    border: 3px solid var(--coquette-pink);
    border-radius: 30px; 
    padding: 20px; 
    box-shadow: 0 15px 35px rgba(219, 112, 147, 0.2);
    position: relative;
    z-index: 1;
  }

  /* --- DECORATIVE HEADER --- */
  .header-decoration {
    display: flex;
    justify-content: space-around;
    margin-bottom: 15px;
    font-size: 24px;
  }

  /* --- CLOCK --- */
  .clock-container { 
    display: flex; 
    justify-content: center; 
    align-items: center;
    gap: 15px;
    margin: 15px 0; 
  }

  .analog-clock { 
    width: 80px; 
    height: 80px; 
    border: 4px solid var(--coquette-pink);
    border-radius: 50%; 
    position: relative; 
    background: white;
    box-shadow: inset 0 0 10px rgba(219, 112, 147, 0.1), 0 5px 15px rgba(219, 112, 147, 0.2);
  }

  .clock-center {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 8px;
    height: 8px;
    background: var(--coquette-pink);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    z-index: 10;
  }

  .hand { 
    position: absolute; 
    bottom: 50%; 
    left: 50%; 
    transform-origin: bottom center;
    background: var(--vintage-brown);
    border-radius: 10px;
  }

  .hour { width: 4px; height: 20px; } 
  .min { width: 3px; height: 28px; } 
  .sec { width: 2px; height: 32px; background: var(--coquette-pink); }

  .digital-time {
    font-family: 'Crimson Text', serif;
    font-size: 18px;
    color: var(--coquette-pink);
    font-weight: bold;
  }

  /* --- GAME BOX --- */
  .game-box { 
    background: white;
    border-radius: 20px; 
    padding: 18px; 
    margin: 15px 0; 
    border: 2px solid #ffdae0;
    box-shadow: 0 5px 15px rgba(219, 112, 147, 0.1);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .game-box::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle, rgba(255, 182, 193, 0.1) 0%, transparent 70%);
    transition: all 0.6s ease;
    opacity: 0;
  }

  .game-box:hover::before {
    opacity: 1;
    transform: translate(-25%, 25%);
  }

  .game-box:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(219, 112, 147, 0.2);
  }

  .game-title {
    font-family: 'Dancing Script', cursive;
    font-size: 22px;
    color: var(--coquette-pink);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .game-content {
    padding: 10px;
  }

  /* --- BUTTONS --- */
  .btn-pink {
    background: linear-gradient(135deg, var(--coquette-pink), #ff9ab5);
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 20px;
    cursor: pointer;
    font-family: 'Courier Prime';
    font-size: 14px;
    box-shadow: 0 4px 15px rgba(219, 112, 147, 0.3);
    transition: all 0.3s ease;
    font-weight: bold;
  }

  .btn-pink:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(219, 112, 147, 0.4);
  }

  .btn-pink:active {
    transform: translateY(0);
  }

  /* --- INPUT FIELDS --- */
  input[type="text"], textarea {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #ffdae0;
    border-radius: 15px;
    font-family: 'Courier Prime';
    font-size: 13px;
    background: white;
    transition: all 0.3s ease;
    margin: 8px 0;
  }

  input[type="text"]:focus, textarea:focus {
    outline: none;
    border-color: var(--coquette-pink);
    box-shadow: 0 0 10px rgba(219, 112, 147, 0.2);
  }

  textarea {
    resize: vertical;
    min-height: 80px;
  }

  /* --- STATS SECTION --- */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin: 15px 0;
  }

  .stat-card {
    background: linear-gradient(135deg, #fff 0%, #fffafc 100%);
    border: 2px solid #ffdae0;
    border-radius: 15px;
    padding: 15px;
    text-align: center;
  }

  .stat-emoji {
    font-size: 28px;
    display: block;
    margin-bottom: 8px;
  }

  .stat-value {
    font-size: 20px;
    font-weight: bold;
    color: var(--coquette-pink);
    font-family: 'Crimson Text', serif;
  }

  .stat-label {
    font-size: 11px;
    color: #8b5a6d;
    margin-top: 4px;
  }

  /* --- FLOATING PETALS --- */
  .petal {
    position: fixed;
    top: -50px;
    animation: fall linear forwards;
    z-index: 2;
    pointer-events: none;
    user-select: none;
  }

  @keyframes fall {
    to {
      top: 110vh;
      transform: translateX(100px) rotate(360deg);
    }
  }

  /* --- QUIZ STYLES --- */
  .quiz-option {
    background: white;
    border: 2px solid #ffdae0;
    padding: 12px;
    margin: 8px 0;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
  }

  .quiz-option:hover {
    background: #fff5f7;
    border-color: var(--coquette-pink);
    transform: translateX(5px);
  }

  .quiz-option.correct {
    background: linear-gradient(135deg, #ff9ab5, var(--coquette-pink));
    color: white;
    border-color: var(--coquette-pink);
  }

  /* --- PROGRESS BAR --- */
  .progress-container {
    background: #ffdae0;
    border-radius: 20px;
    overflow: hidden;
    margin: 10px 0;
    height: 30px;
  }

  .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--coquette-pink), #ff9ab5);
    transition: width 0.5s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 13px;
  }

  /* --- WISHING WELL STYLES --- */
  .well-container {
    position: relative;
    text-align: center;
    padding: 20px;
  }

  .well-emoji {
    font-size: 80px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
  }

  .well-emoji:hover {
    transform: scale(1.1) rotate(5deg);
  }

  .coin {
    position: absolute;
    font-size: 24px;
    animation: coinDrop 1s ease-in forwards;
    pointer-events: none;
  }

  @keyframes coinDrop {
    0% {
      top: 20%;
      opacity: 1;
      transform: scale(1) rotate(0deg);
    }
    100% {
      top: 70%;
      opacity: 0;
      transform: scale(0.3) rotate(360deg);
    }
  }

  /* --- SECTION DIVIDER --- */
  .section-divider {
    display: flex;
    align-items: center;
    margin: 25px 0;
  }

  .section-divider::before,
  .section-divider::after {
    content: '';
    flex: 1;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--coquette-pink), transparent);
  }

  .section-divider span {
    padding: 0 15px;
    font-size: 18px;
  }

  /* --- AVATAR MAKER STYLES --- */
  .avatar-preview {
    width: 150px;
    height: 150px;
    margin: 15px auto;
    border-radius: 50%;
    border: 4px solid var(--coquette-pink);
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #fff5f8, #ffe4e9);
    font-size: 80px;
    position: relative;
    overflow: hidden;
  }

  .avatar-options {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin: 10px 0;
  }

  .avatar-btn {
    padding: 10px;
    border: 2px solid #ffdae0;
    border-radius: 12px;
    background: white;
    cursor: pointer;
    font-size: 24px;
    transition: all 0.3s ease;
  }

  .avatar-btn:hover, .avatar-btn.active {
    border-color: var(--coquette-pink);
    background: #fff5f7;
    transform: scale(1.1);
  }

  .color-picker {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin: 10px 0;
  }

  .color-btn {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    border: 3px solid white;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transition: transform 0.2s;
  }

  .color-btn:hover, .color-btn.active {
    transform: scale(1.2);
    border-color: var(--coquette-pink);
  }

  /* --- FAKE CHAT STYLES --- */
  .chat-preview {
    background: #f5f5f5;
    border-radius: 15px;
    padding: 15px;
    margin: 15px 0;
    max-height: 300px;
    overflow-y: auto;
  }

  .chat-message {
    background: white;
    border-radius: 15px;
    padding: 10px 15px;
    margin: 8px 0;
    max-width: 80%;
    animation: messageSlide 0.3s ease;
  }

  @keyframes messageSlide {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .chat-message.sent {
    background: linear-gradient(135deg, #ff9ab5, var(--coquette-pink));
    color: white;
    margin-left: auto;
    text-align: right;
  }

  .chat-message.received {
    background: white;
    border: 2px solid #ffdae0;
  }

  .message-time {
    font-size: 10px;
    opacity: 0.7;
    margin-top: 4px;
  }

  .chat-input-group {
    display: flex;
    gap: 8px;
    margin: 10px 0;
  }

  .chat-input-group input {
    flex: 1;
    margin: 0;
  }

  .chat-type-btn {
    padding: 10px 15px;
    border: 2px solid #ffdae0;
    background: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.3s;
  }

  .chat-type-btn.active {
    background: var(--coquette-pink);
    color: white;
    border-color: var(--coquette-pink);
  }

  /* --- CONFESSION STYLES --- */
  .confession-wall {
    background: #f8f8f8;
    border-radius: 15px;
    padding: 15px;
    max-height: 300px;
    overflow-y: auto;
    margin: 15px 0;
  }

  .confession-card {
    background: white;
    border-left: 4px solid var(--coquette-pink);
    padding: 12px;
    margin: 10px 0;
    border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  }

  .confession-header {
    font-size: 11px;
    color: #999;
    margin-bottom: 6px;
  }

  .confession-text {
    font-size: 13px;
    color: #333;
    line-height: 1.5;
  }

  /* --- FONT GENERATOR STYLES --- */
  .font-preview {
    background: white;
    border: 2px solid #ffdae0;
    border-radius: 15px;
    padding: 20px;
    margin: 15px 0;
    min-height: 100px;
    word-wrap: break-word;
  }

  .font-style {
    padding: 12px;
    margin: 8px 0;
    cursor: pointer;
    border-radius: 10px;
    transition: all 0.3s;
    border: 1px solid transparent;
  }

  .font-style:hover {
    background: #fff5f7;
    border-color: var(--coquette-pink);
  }

  .copy-btn {
    font-size: 18px;
    cursor: pointer;
    padding: 5px 10px;
    border-radius: 8px;
    transition: all 0.3s;
  }

  .copy-btn:hover {
    background: #fff5f7;
  }

  /* --- WORD CLOUD STYLES --- */
  .word-cloud-container {
    background: linear-gradient(135deg, #fff 0%, #fffafc 100%);
    border: 2px solid #ffdae0;
    border-radius: 15px;
    padding: 20px;
    margin: 15px 0;
    min-height: 200px;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  .word-cloud-item {
    display: inline-block;
    padding: 5px 12px;
    margin: 5px;
    border-radius: 20px;
    background: white;
    border: 2px solid var(--coquette-pink);
    color: var(--coquette-pink);
    font-weight: bold;
    transition: all 0.3s;
    animation: wordPop 0.5s ease;
  }

  @keyframes wordPop {
    0% {
      opacity: 0;
      transform: scale(0);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .word-cloud-item:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(219, 112, 147, 0.3);
  }

  /* --- PERSONALITY TEST STYLES --- */
  .personality-result {
    background: linear-gradient(135deg, #fff5f8, #ffe4e9);
    border: 3px solid var(--coquette-pink);
    border-radius: 20px;
    padding: 25px;
    margin: 15px 0;
    text-align: center;
  }

  .personality-emoji {
    font-size: 60px;
    margin: 10px 0;
  }

  .personality-title {
    font-family: 'Dancing Script', cursive;
    font-size: 24px;
    color: var(--coquette-pink);
    margin: 10px 0;
  }

  .personality-desc {
    font-size: 13px;
    color: #666;
    line-height: 1.6;
  }

  /* --- MOOD TRACKER STYLES --- */
  .mood-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin: 15px 0;
  }

  .mood-btn {
    font-size: 32px;
    padding: 15px;
    border: 2px solid #ffdae0;
    border-radius: 15px;
    background: white;
    cursor: pointer;
    transition: all 0.3s;
  }

  .mood-btn:hover, .mood-btn.selected {
    transform: scale(1.15);
    border-color: var(--coquette-pink);
    background: #fff5f7;
  }

  .mood-history {
    display: flex;
    gap: 5px;
    margin: 15px 0;
    flex-wrap: wrap;
  }

  .mood-entry {
    font-size: 24px;
    animation: moodPop 0.3s ease;
  }

  @keyframes moodPop {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }

  /* --- LOADING OPTIMIZATION --- */
  .lazy-load {
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .lazy-load.loaded {
    opacity: 1;
  }

  /* --- RESPONSIVE --- */
  @media (max-width: 500px) {
    .alya-app-container {
      width: 95%;
      padding: 15px;
    }

    .stats-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }

    .stat-card {
      padding: 10px;
    }

    .stat-emoji {
      font-size: 22px;
    }

    .game-title {
      font-size: 18px;
    }

    .avatar-preview {
      width: 120px;
      height: 120px;
      font-size: 60px;
    }

    .avatar-options {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* Reduced motion for performance */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>
</head>

<body>

<!-- Running Text -->
<div class="running-text">
  <marquee behavior="scroll" direction="left" scrollamount="5">
    ‚ú® Welcome to Alya's Sanctuary ü¶¢ A coquette dreamworld where softness meets creativity üíñ Explore, create, and express yourself üå∏ New features: Avatar Maker, Fake Chat, Confessions & More! ‚ú®
  </marquee>
</div>

<!-- Invitation Overlay -->
<div id="invitation-overlay">
  <div class="invitation-card animate__animated animate__zoomIn">
    <div style="font-size: 60px; margin-bottom: 20px;">ü¶¢</div>
    <h1 style="font-family: 'Dancing Script', cursive; font-size: 36px; color: var(--coquette-pink); margin-bottom: 15px;">
      Alya's Sanctuary
    </h1>
    <p style="font-size: 14px; color: #8b5a6d; margin-bottom: 25px; line-height: 1.6;">
      Enter a world of soft aesthetics, creative tools, and gentle vibes. 
      A coquette dreamland awaits you... üíñ
    </p>
    <button class="btn-enter" onclick="enterSanctuary()">
      <span style="position: relative; z-index: 1;">Enter Sanctuary ‚ú®</span>
    </button>
  </div>
</div>

<!-- Main Container -->
<div class="alya-app-container" id="mainContent" style="display: none;">
  
  <!-- Header Decoration -->
  <div class="header-decoration">
    <span>üå∏</span>
    <span>ü¶¢</span>
    <span>üíñ</span>
    <span>‚ú®</span>
    <span>üå∑</span>
  </div>

  <!-- Title -->
  <div style="text-align: center; margin: 15px 0;">
    <h1 style="font-family: 'Dancing Script', cursive; font-size: 38px; color: var(--coquette-pink); margin-bottom: 5px;">
      Alya's Sanctuary
    </h1>
    <p style="font-size: 13px; color: #8b5a6d; font-style: italic;">
      Your cozy corner of the internet üå∏
    </p>
  </div>

  <!-- Clock -->
  <div class="clock-container">
    <div class="analog-clock">
      <div class="hand hour" id="hourHand"></div>
      <div class="hand min" id="minHand"></div>
      <div class="hand sec" id="secHand"></div>
      <div class="clock-center"></div>
    </div>
    <div class="digital-time" id="digitalTime"></div>
  </div>

  <!-- Stats -->
  <div class="stats-grid">
    <div class="stat-card">
      <span class="stat-emoji">üí´</span>
      <div class="stat-value" id="totalWishes">0</div>
      <div class="stat-label">Wishes Made</div>
    </div>
    <div class="stat-card">
      <span class="stat-emoji">üìñ</span>
      <div class="stat-value" id="diaryCount">0</div>
      <div class="stat-label">Diary Entries</div>
    </div>
    <div class="stat-card">
      <span class="stat-emoji">üå∏</span>
      <div class="stat-value" id="daysActive">1</div>
      <div class="stat-label">Days Active</div>
    </div>
  </div>

  <div class="section-divider"><span>üíñ</span></div>

  <!-- AVATAR MAKER -->
  <div class="game-box lazy-load">
    <div class="game-title">‚ú® Avatar Maker</div>
    <div class="game-content">
      <div class="avatar-preview" id="avatarPreview">
        <span id="avatarFace">üòä</span>
      </div>
      
      <div style="text-align: center; margin: 10px 0; font-size: 12px; color: #8b5a6d;">
        Choose your vibe ‚ú®
      </div>

      <div class="avatar-options">
        <div class="avatar-btn" onclick="setAvatarFace('üòä')">üòä</div>
        <div class="avatar-btn" onclick="setAvatarFace('ü•∞')">ü•∞</div>
        <div class="avatar-btn" onclick="setAvatarFace('üòå')">üòå</div>
        <div class="avatar-btn" onclick="setAvatarFace('üå∏')">üå∏</div>
        <div class="avatar-btn" onclick="setAvatarFace('ü¶¢')">ü¶¢</div>
        <div class="avatar-btn" onclick="setAvatarFace('üíñ')">üíñ</div>
        <div class="avatar-btn" onclick="setAvatarFace('‚ú®')">‚ú®</div>
        <div class="avatar-btn" onclick="setAvatarFace('üéÄ')">üéÄ</div>
      </div>

      <div style="text-align: center; margin: 15px 0; font-size: 12px; color: #8b5a6d;">
        Pick your color üé®
      </div>

      <div class="color-picker">
        <div class="color-btn" style="background: #ffb6c1;" onclick="setAvatarBg('#ffb6c1')"></div>
        <div class="color-btn" style="background: #e6b8e7;" onclick="setAvatarBg('#e6b8e7')"></div>
        <div class="color-btn" style="background: #b4d7ff;" onclick="setAvatarBg('#b4d7ff')"></div>
        <div class="color-btn" style="background: #fffacd;" onclick="setAvatarBg('#fffacd')"></div>
        <div class="color-btn" style="background: #f0fff0;" onclick="setAvatarBg('#f0fff0')"></div>
      </div>

      <button class="btn-pink" onclick="downloadAvatar()" style="width: 100%; margin-top: 15px;">
        Save Avatar üíæ
      </button>
    </div>
  </div>

  <!-- FAKE CHAT GENERATOR -->
  <div class="game-box lazy-load">
    <div class="game-title">üí¨ Fake Chat Generator</div>
    <div class="game-content">
      <div class="chat-preview" id="chatPreview">
        <div style="text-align: center; color: #999; font-size: 12px; padding: 20px;">
          Your conversation will appear here... üí≠
        </div>
      </div>

      <div style="display: flex; gap: 8px; margin: 10px 0;">
        <button class="chat-type-btn active" id="sentBtn" onclick="setChatType('sent')">Me üíñ</button>
        <button class="chat-type-btn" id="receivedBtn" onclick="setChatType('received')">Them üí≠</button>
      </div>

      <div class="chat-input-group">
        <input type="text" id="chatMessage" placeholder="Type your message..." onkeypress="if(event.key==='Enter') addChatMessage()">
        <button class="btn-pink" onclick="addChatMessage()">Send ‚ú®</button>
      </div>

      <div style="display: flex; gap: 8px; margin-top: 10px;">
        <button class="btn-pink" onclick="clearChat()" style="flex: 1; background: linear-gradient(135deg, #999, #666);">
          Clear üóëÔ∏è
        </button>
        <button class="btn-pink" onclick="screenshotChat()" style="flex: 1;">
          Screenshot üì∏
        </button>
      </div>
    </div>
  </div>

  <!-- ANONYMOUS CONFESSION -->
  <div class="game-box lazy-load">
    <div class="game-title">ü§´ Anonymous Confession</div>
    <div class="game-content">
      <textarea id="confessionInput" placeholder="Share your thoughts anonymously... no one will know it's you üí≠‚ú®" style="min-height: 100px;"></textarea>
      
      <button class="btn-pink" onclick="postConfession()" style="width: 100%; margin: 10px 0;">
        Post Anonymously üïäÔ∏è
      </button>

      <div class="confession-wall" id="confessionWall">
        <div style="text-align: center; color: #999; font-size: 12px; padding: 20px;">
          No confessions yet... be the first to share üíñ
        </div>
      </div>
    </div>
  </div>

  <!-- AESTHETIC FONT GENERATOR -->
  <div class="game-box lazy-load">
    <div class="game-title">‚ú® Aesthetic Font Generator</div>
    <div class="game-content">
      <input type="text" id="fontInput" placeholder="Type your text here..." oninput="generateFonts()">
      
      <div style="margin: 15px 0; max-height: 300px; overflow-y: auto;">
        <div id="fontOutputs"></div>
      </div>
    </div>
  </div>

  <!-- WORD CLOUD -->
  <div class="game-box lazy-load">
    <div class="game-title">‚òÅÔ∏è Thought Cloud</div>
    <div class="game-content">
      <p style="font-size: 12px; color: #8b5a6d; margin-bottom: 10px; text-align: center;">
        Add words to create your personal thought cloud ‚ú®
      </p>
      
      <div style="display: flex; gap: 8px;">
        <input type="text" id="cloudInput" placeholder="Add a word or thought..." onkeypress="if(event.key==='Enter') addToCloud()">
        <button class="btn-pink" onclick="addToCloud()">Add ‚òÅÔ∏è</button>
      </div>

      <div class="word-cloud-container" id="wordCloud">
        <div style="text-align: center; color: #999; font-size: 12px; width: 100%;">
          Your thought cloud will appear here... üí≠
        </div>
      </div>

      <button class="btn-pink" onclick="clearCloud()" style="width: 100%; margin-top: 10px; background: linear-gradient(135deg, #999, #666);">
        Clear Cloud üå´Ô∏è
      </button>
    </div>
  </div>

  <!-- PERSONALITY TEST -->
  <div class="game-box lazy-load">
    <div class="game-title">üå∏ Coquette Personality Test</div>
    <div class="game-content">
      <div id="personalityQuiz">
        <p id="personalityQuestion" style="font-size: 15px; color: var(--vintage-brown); margin-bottom: 15px; text-align: center; font-weight: bold;">
          Loading...
        </p>
        <div id="personalityOptions"></div>
      </div>
      <div id="personalityResult"></div>
    </div>
  </div>

  <!-- MOOD TRACKER -->
  <div class="game-box lazy-load">
    <div class="game-title">üíï Mood Tracker</div>
    <div class="game-content">
      <p style="font-size: 12px; color: #8b5a6d; margin-bottom: 10px; text-align: center;">
        How are you feeling today? üå∏
      </p>

      <div class="mood-grid">
        <div class="mood-btn" onclick="trackMood('üòä', 'Happy')" title="Happy">üòä</div>
        <div class="mood-btn" onclick="trackMood('üòå', 'Calm')" title="Calm">üòå</div>
        <div class="mood-btn" onclick="trackMood('ü•∞', 'Loved')" title="Loved">ü•∞</div>
        <div class="mood-btn" onclick="trackMood('üò¢', 'Sad')" title="Sad">üò¢</div>
        <div class="mood-btn" onclick="trackMood('üò¥', 'Tired')" title="Tired">üò¥</div>
      </div>

      <div style="margin: 15px 0; padding: 15px; background: white; border-radius: 12px; border: 2px solid #ffdae0;">
        <div style="font-size: 12px; color: #8b5a6d; margin-bottom: 8px; text-align: center;">
          Your mood this week üìä
        </div>
        <div class="mood-history" id="moodHistory"></div>
      </div>
    </div>
  </div>

  <div class="section-divider"><span>ü¶¢</span></div>

  <!-- WISHING WELL -->
  <div class="game-box lazy-load">
    <div class="game-title">‚õ≤ Wishing Well</div>
    <div class="game-content">
      <div class="well-container" id="wellContainer">
        <div class="well-emoji" onclick="makeWish()">‚õ≤</div>
        <p style="font-size: 13px; color: #8b5a6d; margin-top: 10px;">
          Click the well and make a wish... üí´
        </p>
      </div>
    </div>
  </div>

  <!-- COQUETTE QUIZ (existing) -->
  <div class="game-box lazy-load">
    <div class="game-title">üéÄ Coquette Quiz</div>
    <div class="game-content">
      <p id="quizQuestion" style="font-size: 14px; color: var(--vintage-brown); margin-bottom: 12px; text-align: center;">
        Loading...
      </p>
      <div id="quizOptions"></div>
      <div id="quizResult" style="margin-top: 15px; text-align: center; font-weight: bold; color: var(--coquette-pink);"></div>
    </div>
  </div>

  <!-- THOUGHTS WALL -->
  <div class="game-box lazy-load">
    <div class="game-title">üí≠ Thoughts Wall</div>
    <div class="game-content">
      <textarea id="thoughtInput" placeholder="Share what's on your mind... üí≠" style="min-height: 80px;"></textarea>
      <button class="btn-pink" onclick="postThought()" style="width: 100%; margin-top: 10px;">
        Post Thought üíñ
      </button>
      <div id="thoughtsWall" style="margin-top: 15px; max-height: 250px; overflow-y: auto;"></div>
    </div>
  </div>

  <!-- OVERTHINKING SIMULATOR -->
  <div class="game-box lazy-load">
    <div class="game-title">üåô Overthinking Simulator</div>
    <div class="game-content">
      <p style="font-size: 12px; color: #8b5a6d; margin-bottom: 12px; text-align: center;">
        Let's overthink together... because sometimes we just do üí≠
      </p>
      <div id="overthink-display" style="padding: 20px; background: #fff5f7; border-radius: 12px; min-height: 80px; display: flex; align-items: center; justify-content: center; text-align: center; font-size: 14px; color: var(--vintage-brown); margin-bottom: 12px;">
        Click the button to start...
      </div>
      <button class="btn-pink" onclick="startOverthinking()" style="width: 100%;">
        Start Overthinking üåÄ
      </button>
    </div>
  </div>

  <!-- DIARY -->
  <div class="game-box lazy-load">
    <div class="game-title">üìñ Secret Diary</div>
    <div class="game-content">
      <textarea id="diaryInput" placeholder="Dear diary... write your secrets here üîê" style="min-height: 120px;"></textarea>
      <button class="btn-pink" onclick="saveDiary()" style="width: 100%; margin-top: 10px;">
        Lock in Diary üîí
      </button>
      <p style="font-size: 11px; color: #999; margin-top: 8px; text-align: center;">
        Your entries are private and locked üíñ
      </p>
    </div>
  </div>

  <!-- Footer -->
  <div style="text-align: center; margin-top: 30px; padding: 20px; border-top: 2px solid #ffdae0;">
    <p style="font-family: 'Dancing Script', cursive; font-size: 18px; color: var(--coquette-pink); margin-bottom: 8px;">
      Thank you for visiting ü¶¢
    </p>
    <p style="font-size: 11px; color: #8b5a6d;">
      Made with love & soft aesthetics üíñ‚ú®
    </p>
  </div>

</div>

<script>
  // ========================================
  // GAME STATE
  // ========================================
  let gameState = {
    wishes: 0,
    diaryEntries: 0,
    moods: [],
    confessions: [],
    wordCloud: []
  };

  let currentChatType = 'sent';
  let avatarConfig = {
    face: 'üòä',
    bg: 'linear-gradient(135deg, #fff5f8, #ffe4e9)'
  };

  // ========================================
  // DEBOUNCE FUNCTION FOR OPTIMIZATION
  // ========================================
  function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }

  // ========================================
  // ENTRANCE ANIMATION
  // ========================================
  function enterSanctuary() {
    const overlay = document.getElementById('invitation-overlay');
    const mainContent = document.getElementById('mainContent');
    
    overlay.classList.add('animate__fadeOut');
    setTimeout(() => {
      overlay.style.display = 'none';
      mainContent.style.display = 'block';
      mainContent.classList.add('animate__animated', 'animate__fadeIn');
      
      // Initialize games after entrance
      initializeApp();
    }, 800);
  }

  // ========================================
  // INITIALIZE APP
  // ========================================
  function initializeApp() {
    updateClock();
    setInterval(updateClock, 1000);
    loadStats();
    loadQuiz();
    loadPersonalityTest();
    startFlowerRain();
    
    // Lazy load game boxes
    const lazyBoxes = document.querySelectorAll('.lazy-load');
    lazyBoxes.forEach((box, index) => {
      setTimeout(() => {
        box.classList.add('loaded');
      }, index * 100);
    });
  }

  // ========================================
  // CLOCK
  // ========================================
  function updateClock() {
    const now = new Date();
    const hours = now.getHours();
    const minutes = now.getMinutes();
    const seconds = now.getSeconds();

    const hourDeg = (hours % 12) * 30 + minutes * 0.5;
    const minDeg = minutes * 6;
    const secDeg = seconds * 6;

    const hourHand = document.getElementById('hourHand');
    const minHand = document.getElementById('minHand');
    const secHand = document.getElementById('secHand');
    
    if (hourHand) hourHand.style.transform = `rotate(${hourDeg}deg)`;
    if (minHand) minHand.style.transform = `rotate(${minDeg}deg)`;
    if (secHand) secHand.style.transform = `rotate(${secDeg}deg)`;

    const digitalTime = document.getElementById('digitalTime');
    if (digitalTime) {
      digitalTime.textContent = now.toLocaleTimeString('id-ID', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
    }
  }

  // ========================================
  // AVATAR MAKER
  // ========================================
  function setAvatarFace(face) {
    avatarConfig.face = face;
    document.getElementById('avatarFace').textContent = face;
    
    // Remove active class from all
    document.querySelectorAll('.avatar-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    
    // Add active to clicked
    event.target.classList.add('active');
  }

  function setAvatarBg(color) {
    avatarConfig.bg = `linear-gradient(135deg, ${color}, ${color}dd)`;
    document.getElementById('avatarPreview').style.background = avatarConfig.bg;
    
    // Remove active class from all
    document.querySelectorAll('.color-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    
    // Add active to clicked
    event.target.classList.add('active');
  }

  function downloadAvatar() {
    // Simple notification since we can't create actual downloadable images in pure HTML/JS
    const notification = document.createElement('div');
    notification.style.cssText = 'position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:25px 40px; border-radius:20px; border:3px solid var(--coquette-pink); box-shadow:0 15px 40px rgba(0,0,0,0.3); z-index:10001; text-align:center;';
    notification.className = 'animate__animated animate__zoomIn';
    notification.innerHTML = `
      <div style="font-size:50px;">${avatarConfig.face}</div>
      <div style="margin-top:15px; color:var(--coquette-pink); font-weight:bold; font-size:18px;">Avatar Created!</div>
      <div style="font-size:13px; color:#8b5a6d; margin-top:8px;">Take a screenshot to save üíñ</div>
    `;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.classList.replace('animate__zoomIn', 'animate__zoomOut');
      setTimeout(() => notification.remove(), 500);
    }, 2500);
  }

  // ========================================
  // FAKE CHAT GENERATOR
  // ========================================
  function setChatType(type) {
    currentChatType = type;
    document.getElementById('sentBtn').classList.remove('active');
    document.getElementById('receivedBtn').classList.remove('active');
    document.getElementById(type === 'sent' ? 'sentBtn' : 'receivedBtn').classList.add('active');
  }

  function addChatMessage() {
    const input = document.getElementById('chatMessage');
    const preview = document.getElementById('chatPreview');
    
    if (input.value.trim() === '') return;
    
    // Clear placeholder
    if (preview.children.length === 1 && preview.children[0].style.textAlign === 'center') {
      preview.innerHTML = '';
    }
    
    const message = document.createElement('div');
    message.className = `chat-message ${currentChatType}`;
    
    const time = new Date().toLocaleTimeString('id-ID', {hour: '2-digit', minute: '2-digit'});
    message.innerHTML = `
      <div>${input.value}</div>
      <div class="message-time">${time}</div>
    `;
    
    preview.appendChild(message);
    preview.scrollTop = preview.scrollHeight;
    input.value = '';
  }

  function clearChat() {
    const preview = document.getElementById('chatPreview');
    preview.innerHTML = '<div style="text-align: center; color: #999; font-size: 12px; padding: 20px;">Your conversation will appear here... üí≠</div>';
  }

  function screenshotChat() {
    const notification = document.createElement('div');
    notification.style.cssText = 'position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:25px 40px; border-radius:20px; border:3px solid var(--coquette-pink); box-shadow:0 15px 40px rgba(0,0,0,0.3); z-index:10001; text-align:center;';
    notification.className = 'animate__animated animate__zoomIn';
    notification.innerHTML = `
      <div style="font-size:50px;">üì∏</div>
      <div style="margin-top:15px; color:var(--coquette-pink); font-weight:bold; font-size:18px;">Ready to Screenshot!</div>
      <div style="font-size:13px; color:#8b5a6d; margin-top:8px;">Use your device's screenshot tool üíñ</div>
    `;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.classList.replace('animate__zoomIn', 'animate__zoomOut');
      setTimeout(() => notification.remove(), 500);
    }, 2500);
  }

  // ========================================
  // ANONYMOUS CONFESSION
  // ========================================
  function postConfession() {
    const input = document.getElementById('confessionInput');
    const wall = document.getElementById('confessionWall');
    
    if (input.value.trim() === '') return;
    
    // Clear placeholder
    if (wall.children.length === 1 && wall.children[0].style.textAlign === 'center') {
      wall.innerHTML = '';
    }
    
    const confession = {
      text: input.value,
      time: new Date().toLocaleString('id-ID', {
        day: '2-digit',
        month: 'short',
        hour: '2-digit',
        minute: '2-digit'
      }),
      id: Date.now()
    };
    
    gameState.confessions.unshift(confession);
    
    const card = document.createElement('div');
    card.className = 'confession-card animate__animated animate__fadeInUp';
    card.innerHTML = `
      <div class="confession-header">Anonymous ‚Ä¢ ${confession.time}</div>
      <div class="confession-text">${confession.text}</div>
    `;
    
    wall.insertBefore(card, wall.firstChild);
    input.value = '';
    
    // Keep only last 20 confessions
    while(wall.children.length > 20) {
      wall.removeChild(wall.lastChild);
    }
    
    saveStats();
  }

  // ========================================
  // AESTHETIC FONT GENERATOR
  // ========================================
  const fontStyles = [
    {
      name: 'Bubble Text',
      convert: (text) => {
        const chars = {
          'a':'‚ìê','b':'‚ìë','c':'‚ìí','d':'‚ìì','e':'‚ìî','f':'‚ìï','g':'‚ìñ','h':'‚ìó','i':'‚ìò','j':'‚ìô','k':'‚ìö','l':'‚ìõ','m':'‚ìú',
          'n':'‚ìù','o':'‚ìû','p':'‚ìü','q':'‚ì†','r':'‚ì°','s':'‚ì¢','t':'‚ì£','u':'‚ì§','v':'‚ì•','w':'‚ì¶','x':'‚ìß','y':'‚ì®','z':'‚ì©',
          'A':'‚í∂','B':'‚í∑','C':'‚í∏','D':'‚íπ','E':'‚í∫','F':'‚íª','G':'‚íº','H':'‚íΩ','I':'‚íæ','J':'‚íø','K':'‚ìÄ','L':'‚ìÅ','M':'‚ìÇ',
          'N':'‚ìÉ','O':'‚ìÑ','P':'‚ìÖ','Q':'‚ìÜ','R':'‚ìá','S':'‚ìà','T':'‚ìâ','U':'‚ìä','V':'‚ìã','W':'‚ìå','X':'‚ìç','Y':'‚ìé','Z':'‚ìè'
        };
        return text.split('').map(c => chars[c] || c).join('');
      }
    },
    {
      name: 'Cute Hearts',
      convert: (text) => `üíñ ${text} üíñ`
    },
    {
      name: 'Sparkle',
      convert: (text) => `‚ú® ${text.split('').join(' ‚ú® ')} ‚ú®`
    },
    {
      name: 'Fancy Script',
      convert: (text) => {
        const chars = {
          'a':'ùí∂','b':'ùí∑','c':'ùí∏','d':'ùíπ','e':'ùëí','f':'ùíª','g':'ùëî','h':'ùíΩ','i':'ùíæ','j':'ùíø','k':'ùìÄ','l':'ùìÅ','m':'ùìÇ',
          'n':'ùìÉ','o':'ùëú','p':'ùìÖ','q':'ùìÜ','r':'ùìá','s':'ùìà','t':'ùìâ','u':'ùìä','v':'ùìã','w':'ùìå','x':'ùìç','y':'ùìé','z':'ùìè',
          'A':'ùíú','B':'ùêµ','C':'ùíû','D':'ùíü','E':'ùê∏','F':'ùêπ','G':'ùí¢','H':'ùêª','I':'ùêº','J':'ùí•','K':'ùí¶','L':'ùêø','M':'ùëÄ',
          'N':'ùí©','O':'ùí™','P':'ùí´','Q':'ùí¨','R':'ùëÖ','S':'ùíÆ','T':'ùíØ','U':'ùí∞','V':'ùí±','W':'ùí≤','X':'ùí≥','Y':'ùí¥','Z':'ùíµ'
        };
        return text.split('').map(c => chars[c] || c).join('');
      }
    },
    {
      name: 'Kawaii',
      convert: (text) => `(ÔΩ°‚ô•‚Äø‚ô•ÔΩ°) ${text} (ÔΩ°‚ô•‚Äø‚ô•ÔΩ°)`
    },
    {
      name: 'Wave Text',
      convert: (text) => `~¬∞ ${text} ¬∞~`
    },
    {
      name: 'Flower Border',
      convert: (text) => `üå∏ ${text} üå∏`
    }
  ];

  const generateFonts = debounce(function() {
    const input = document.getElementById('fontInput').value;
    const output = document.getElementById('fontOutputs');
    
    if (input.trim() === '') {
      output.innerHTML = '<div style="text-align:center; color:#999; padding:20px;">Type something to see font styles ‚ú®</div>';
      return;
    }
    
    output.innerHTML = '';
    
    fontStyles.forEach(style => {
      const div = document.createElement('div');
      div.className = 'font-style';
      div.innerHTML = `
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div>
            <div style="font-size:11px; color:#999; margin-bottom:5px;">${style.name}</div>
            <div style="font-size:15px; color:var(--vintage-brown);">${style.convert(input)}</div>
          </div>
          <span class="copy-btn" onclick="copyFont('${style.convert(input).replace(/'/g, "\\'")}')">üìã</span>
        </div>
      `;
      output.appendChild(div);
    });
  }, 300);

  function copyFont(text) {
    navigator.clipboard.writeText(text).then(() => {
      const notification = document.createElement('div');
      notification.className = 'mini-popup animate__animated animate__fadeInUp';
      notification.innerHTML = '‚úì Copied! üíñ';
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.replace('animate__fadeInUp', 'animate__fadeOutDown');
        setTimeout(() => notification.remove(), 500);
      }, 1500);
    });
  }

  // ========================================
  // WORD CLOUD
  // ========================================
  function addToCloud() {
    const input = document.getElementById('cloudInput');
    const cloud = document.getElementById('wordCloud');
    
    if (input.value.trim() === '') return;
    
    // Clear placeholder
    if (cloud.children.length === 1 && cloud.children[0].style.width === '100%') {
      cloud.innerHTML = '';
    }
    
    const words = input.value.trim().split(' ');
    
    words.forEach(word => {
      if (word.trim() !== '') {
        gameState.wordCloud.push(word);
        
        const item = document.createElement('div');
        item.className = 'word-cloud-item';
        item.textContent = word;
        item.style.fontSize = (12 + Math.random() * 12) + 'px';
        
        cloud.appendChild(item);
      }
    });
    
    input.value = '';
    saveStats();
  }

  function clearCloud() {
    const cloud = document.getElementById('wordCloud');
    cloud.innerHTML = '<div style="text-align: center; color: #999; font-size: 12px; width: 100%;">Your thought cloud will appear here... üí≠</div>';
    gameState.wordCloud = [];
    saveStats();
  }

  // ========================================
  // PERSONALITY TEST
  // ========================================
  const personalityQuestions = [
    {
      question: "Your perfect afternoon?",
      options: [
        {text: "Reading in a cozy cafe ‚òï", trait: "dreamer"},
        {text: "Shopping for cute things üõçÔ∏è", trait: "aesthetic"},
        {text: "Journaling and reflecting üìñ", trait: "thoughtful"},
        {text: "Making art or crafts ‚ú®", trait: "creative"}
      ]
    },
    {
      question: "Your style vibe?",
      options: [
        {text: "Soft pastels & lace üéÄ", trait: "aesthetic"},
        {text: "Vintage & romantic üåπ", trait: "dreamer"},
        {text: "Minimalist & clean ü§ç", trait: "thoughtful"},
        {text: "Unique & expressive üí´", trait: "creative"}
      ]
    },
    {
      question: "How do you express yourself?",
      options: [
        {text: "Through writing ‚úçÔ∏è", trait: "thoughtful"},
        {text: "Through fashion üëó", trait: "aesthetic"},
        {text: "Through daydreaming üí≠", trait: "dreamer"},
        {text: "Through creating üé®", trait: "creative"}
      ]
    }
  ];

  let currentPersonalityIndex = 0;
  let personalityScores = {dreamer: 0, aesthetic: 0, thoughtful: 0, creative: 0};

  function loadPersonalityTest() {
    if (currentPersonalityIndex >= personalityQuestions.length) {
      showPersonalityResult();
      return;
    }
    
    const q = personalityQuestions[currentPersonalityIndex];
    document.getElementById('personalityQuestion').textContent = q.question;
    
    const optionsDiv = document.getElementById('personalityOptions');
    optionsDiv.innerHTML = '';
    
    q.options.forEach((option) => {
      const btn = document.createElement('div');
      btn.className = 'quiz-option';
      btn.textContent = option.text;
      btn.onclick = () => selectPersonalityOption(option.trait, btn);
      optionsDiv.appendChild(btn);
    });
  }

  function selectPersonalityOption(trait, element) {
    personalityScores[trait]++;
    element.classList.add('correct');
    
    setTimeout(() => {
      currentPersonalityIndex++;
      loadPersonalityTest();
    }, 600);
  }

  function showPersonalityResult() {
    const maxTrait = Object.keys(personalityScores).reduce((a, b) => 
      personalityScores[a] > personalityScores[b] ? a : b
    );
    
    const personalities = {
      dreamer: {
        emoji: 'üåô',
        title: 'Romantic Dreamer',
        desc: 'You live in a world of soft fantasies and gentle thoughts. Your mind is a beautiful garden of imagination and wonder. You find magic in the little things and believe in fairy tales. üí≠‚ú®'
      },
      aesthetic: {
        emoji: 'üéÄ',
        title: 'Aesthetic Princess',
        desc: 'You have an eye for beauty and create it wherever you go. Your world is carefully curated with soft colors, pretty things, and delicate details. You are the embodiment of coquette elegance. üíñüå∏'
      },
      thoughtful: {
        emoji: 'üìñ',
        title: 'Thoughtful Soul',
        desc: 'You are introspective and deep, finding meaning in quiet moments. Your journal knows your heart, and you express yourself through words and reflection. Gentle and wise beyond your years. üïäÔ∏è‚ú®'
      },
      creative: {
        emoji: '‚ú®',
        title: 'Creative Spirit',
        desc: 'You express yourself through art and creation. Your hands bring beauty into the world, whether through crafts, art, or unique ideas. You see potential everywhere and make it real. üé®üí´'
      }
    };
    
    const result = personalities[maxTrait];
    
    document.getElementById('personalityResult').innerHTML = `
      <div class="personality-result">
        <div class="personality-emoji">${result.emoji}</div>
        <div class="personality-title">${result.title}</div>
        <div class="personality-desc">${result.desc}</div>
        <button class="btn-pink" onclick="resetPersonalityTest()" style="margin-top:15px;">
          Take Again üíï
        </button>
      </div>
    `;
    
    document.getElementById('personalityQuestion').textContent = '';
    document.getElementById('personalityOptions').innerHTML = '';
  }

  function resetPersonalityTest() {
    currentPersonalityIndex = 0;
    personalityScores = {dreamer: 0, aesthetic: 0, thoughtful: 0, creative: 0};
    document.getElementById('personalityResult').innerHTML = '';
    loadPersonalityTest();
  }

  // ========================================
  // MOOD TRACKER
  // ========================================
  function trackMood(emoji, moodName) {
    const now = new Date();
    const mood = {
      emoji: emoji,
      name: moodName,
      time: now.toLocaleTimeString('id-ID', {hour: '2-digit', minute: '2-digit'}),
      date: now.toLocaleDateString('id-ID')
    };
    
    gameState.moods.unshift(mood);
    
    // Keep only last 7 days
    if (gameState.moods.length > 35) {
      gameState.moods = gameState.moods.slice(0, 35);
    }
    
    updateMoodHistory();
    saveStats();
    
    // Visual feedback
    event.target.classList.add('selected');
    setTimeout(() => {
      event.target.classList.remove('selected');
    }, 1000);
  }

  function updateMoodHistory() {
    const history = document.getElementById('moodHistory');
    history.innerHTML = '';
    
    if (gameState.moods.length === 0) {
      history.innerHTML = '<div style="text-align:center; color:#999; font-size:12px; width:100%;">No moods tracked yet üí≠</div>';
      return;
    }
    
    // Show last 14 moods
    gameState.moods.slice(0, 14).forEach(mood => {
      const entry = document.createElement('div');
      entry.className = 'mood-entry';
      entry.textContent = mood.emoji;
      entry.title = `${mood.name} - ${mood.time}`;
      history.appendChild(entry);
    });
  }

  // ========================================
  // COQUETTE QUIZ
  // ========================================
  const quizQuestions = [
    {
      question: "Warna coquette favoritmu?",
      options: ["Pink Pastel üå∏", "Putih Mutiara ü¶¢", "Lavender üíú", "Cream ü§ç"],
      points: [10, 8, 9, 7]
    },
    {
      question: "Aktivitas santai pilihanmu?",
      options: ["Journaling üìñ", "Mendengar musik üéµ", "Minum tea ‚òï", "Merangkai bunga üå∏"],
      points: [10, 9, 8, 10]
    },
    {
      question: "Aksesori favoritmu?",
      options: ["Pita rambut üéÄ", "Kalung mutiara üíé", "Gelang charm ‚ú®", "Anting bunga üå∏"],
      points: [10, 9, 8, 9]
    }
  ];

  let currentQuizIndex = 0;
  let totalQuizScore = 0;

  function loadQuiz() {
    if (currentQuizIndex >= quizQuestions.length) {
      showQuizResult();
      return;
    }
    
    const q = quizQuestions[currentQuizIndex];
    document.getElementById('quizQuestion').textContent = q.question;
    
    const optionsDiv = document.getElementById('quizOptions');
    optionsDiv.innerHTML = '';
    
    q.options.forEach((option, index) => {
      const btn = document.createElement('div');
      btn.className = 'quiz-option';
      btn.textContent = option;
      btn.onclick = () => selectQuizOption(index, q.points[index], btn);
      optionsDiv.appendChild(btn);
    });
  }

  function selectQuizOption(index, points, element) {
    totalQuizScore += points;
    element.classList.add('correct');
    
    setTimeout(() => {
      currentQuizIndex++;
      loadQuiz();
    }, 600);
  }

  function showQuizResult() {
    let personality = '';
    if (totalQuizScore >= 27) {
      personality = "üíñ Pure Coquette - You're the essence of softness and grace!";
    } else if (totalQuizScore >= 20) {
      personality = "ü¶¢ Elegant Swan - Graceful and timeless beauty!";
    } else {
      personality = "üå∏ Blooming Rose - Sweet and charming!";
    }
    
    document.getElementById('quizResult').innerHTML = personality;
    document.getElementById('quizQuestion').textContent = "Quiz Complete!";
    document.getElementById('quizOptions').innerHTML = '<button class="btn-pink" onclick="resetQuiz()">Take Again üíï</button>';
  }

  function resetQuiz() {
    currentQuizIndex = 0;
    totalQuizScore = 0;
    document.getElementById('quizResult').innerHTML = '';
    loadQuiz();
  }

  // ========================================
  // WISHING WELL
  // ========================================
  function makeWish() {
    const well = document.getElementById('wellContainer');
    const coin = document.createElement('div');
    coin.className = 'coin';
    coin.textContent = 'üí´';
    coin.style.left = '50%';
    coin.style.top = '20%';
    well.appendChild(coin);
    
    setTimeout(() => coin.remove(), 1000);
    
    gameState.wishes++;
    document.getElementById('totalWishes').textContent = gameState.wishes;
    saveStats();
    
    const wishes = [
      "Your wish is floating to the stars... ‚ú®",
      "The universe heard your wish... üí´",
      "Magic is coming your way... üåô",
      "Your dreams are manifesting... üíñ",
      "Believe in your wish... ü¶¢"
    ];
    
    setTimeout(() => {
      const notification = document.createElement('div');
      notification.className = 'mini-popup animate__animated animate__fadeInUp';
      notification.innerHTML = wishes[Math.floor(Math.random() * wishes.length)];
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.replace('animate__fadeInUp', 'animate__fadeOutDown');
        setTimeout(() => notification.remove(), 500);
      }, 2000);
    }, 500);
  }

  // ========================================
  // THOUGHTS WALL
  // ========================================
  function postThought() {
    const input = document.getElementById('thoughtInput');
    const wall = document.getElementById('thoughtsWall');
    
    if (input.value.trim() !== '') {
      const thought = document.createElement('div');
      thought.style.cssText = 'background:white; padding:10px; margin:8px 0; border-radius:12px; border-left:3px solid var(--coquette-pink); font-size:13px;';
      thought.className = 'animate__animated animate__fadeInUp';
      
      const time = new Date().toLocaleTimeString('id-ID', {hour: '2-digit', minute: '2-digit'});
      thought.innerHTML = `<span style="color:#8b5a6d; font-size:11px;">${time}</span><br>${input.value}`;
      
      wall.insertBefore(thought, wall.firstChild);
      input.value = '';
      
      // Keep only last 10 thoughts
      while(wall.children.length > 10) {
        wall.removeChild(wall.lastChild);
      }
    }
  }

  // ========================================
  // OVERTHINKING SIMULATOR
  // ========================================
  let overthinkInterval;
  function startOverthinking() {
    const thoughts = [
      "Kenapa ya tadi dia bilang gitu?",
      "Apa maksudnya sebenarnya?",
      "Duh, harusnya aku jawab apa tadi...",
      "Gimana kalau dia salah paham?",
      "Aneh gak sih aku kayak gini?",
      "Kok aku jadi mikirin ini terus...",
      "Mungkin aku terlalu sensitif?",
      "Atau dia yang terlalu cuek?",
      "Sebaiknya aku gimana ya?",
      "Ah sudahlah, yang penting happy! üíñ"
    ];
    
    const display = document.getElementById('overthink-display');
    let index = 0;
    
    clearInterval(overthinkInterval);
    display.textContent = thoughts[0];
    
    overthinkInterval = setInterval(() => {
      index++;
      if (index >= thoughts.length) {
        clearInterval(overthinkInterval);
        display.innerHTML = '<span style="color:var(--coquette-pink); font-weight:bold;">‚ú® Overthinking complete! Time to relax ü¶¢</span>';
        return;
      }
      display.textContent = thoughts[index];
      display.className = 'animate__animated animate__fadeIn';
    }, 2000);
  }

  // ========================================
  // DIARY
  // ========================================
  function saveDiary() {
    const input = document.getElementById('diaryInput');
    if (input.value.trim() !== '') {
      gameState.diaryEntries++;
      document.getElementById('diaryCount').textContent = gameState.diaryEntries;
      saveStats();
      
      const notification = document.createElement('div');
      notification.style.cssText = 'position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:20px 40px; border-radius:20px; border:3px solid var(--coquette-pink); box-shadow:0 10px 30px rgba(0,0,0,0.3); z-index:10001; text-align:center;';
      notification.className = 'animate__animated animate__zoomIn';
      notification.innerHTML = '<div style="font-size:40px;">üîê</div><div style="margin-top:10px; color:var(--coquette-pink); font-weight:bold;">Diary Locked!</div><div style="font-size:12px; color:#8b5a6d; margin-top:5px;">Your secrets are safe üíñ</div>';
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.replace('animate__zoomIn', 'animate__zoomOut');
        setTimeout(() => notification.remove(), 500);
      }, 2000);
      
      input.value = '';
    }
  }

  // ========================================
  // FLOWER RAIN (Optimized)
  // ========================================
  function startFlowerRain() {
    setInterval(() => {
      // Reduced frequency for performance
      if (Math.random() > 0.3) return;
      
      const flowers = ['üå∏', 'üå∫', 'ü¶¢', 'üíñ', '‚ú®'];
      const p = document.createElement('div');
      p.className = 'petal';
      p.innerText = flowers[Math.floor(Math.random() * flowers.length)];
      p.style.left = Math.random() * 100 + 'vw';
      p.style.fontSize = (Math.random() * 10 + 12) + 'px';
      const dur = Math.random() * 2 + 4;
      p.style.animationDuration = dur + 's';
      document.body.appendChild(p);
      setTimeout(() => p.remove(), dur * 1000);
    }, 4000); // Less frequent
  }

  // ========================================
  // STATS MANAGEMENT
  // ========================================
  function saveStats() {
    localStorage.setItem('alyaStats', JSON.stringify(gameState));
  }

  function loadStats() {
    const saved = localStorage.getItem('alyaStats');
    if (saved) {
      gameState = JSON.parse(saved);
      document.getElementById('totalWishes').textContent = gameState.wishes;
      document.getElementById('diaryCount').textContent = gameState.diaryEntries;
      
      // Restore confessions
      if (gameState.confessions && gameState.confessions.length > 0) {
        const wall = document.getElementById('confessionWall');
        wall.innerHTML = '';
        gameState.confessions.forEach(confession => {
          const card = document.createElement('div');
          card.className = 'confession-card';
          card.innerHTML = `
            <div class="confession-header">Anonymous ‚Ä¢ ${confession.time}</div>
            <div class="confession-text">${confession.text}</div>
          `;
          wall.appendChild(card);
        });
      }
      
      // Restore word cloud
      if (gameState.wordCloud && gameState.wordCloud.length > 0) {
        const cloud = document.getElementById('wordCloud');
        cloud.innerHTML = '';
        gameState.wordCloud.forEach(word => {
          const item = document.createElement('div');
          item.className = 'word-cloud-item';
          item.textContent = word;
          item.style.fontSize = (12 + Math.random() * 12) + 'px';
          cloud.appendChild(item);
        });
      }
      
      // Update mood history
      if (gameState.moods) {
        updateMoodHistory();
      }
    }
    
    // Calculate days active
    const firstVisit = localStorage.getItem('firstVisit');
    if (!firstVisit) {
      localStorage.setItem('firstVisit', new Date().toISOString());
      document.getElementById('daysActive').textContent = '1';
    } else {
      const days = Math.floor((new Date() - new Date(firstVisit)) / (1000 * 60 * 60 * 24)) + 1;
      document.getElementById('daysActive').textContent = days;
    }
  }

  // ========================================
  // AUTO-SAVE ON EXIT
  // ========================================
  window.addEventListener('beforeunload', () => {
    saveStats();
  });
</script>

</body>
</html>
